<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Popkaari is premium roasted makhana with bold desi flavors. Light, airy crunch built for chai breaks, office drawers, travel and gifting. Get first access + launch deals." name="description"/>
<meta content="#F6F7F2" name="theme-color"/>
<meta content="Popkaari | Premium Roasted Makhana Snacks" property="og:title"/>
<meta content="Light, airy, premium roasted makhana with bold desi flavors. Join for first access + launch deals." property="og:description"/>
<meta content="website" property="og:type"/>
<meta content="Popkaari" property="og:site_name"/>
<meta content="https://popkaari.com" property="og:url"/>
<meta content="https://popkaari.com/og.jpg" property="og:image"/>
<title>Popkaari | Premium Makhana Snacks</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Poppins:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<style>
    :root{
      --bg:#F6F7F2;
      --bg2:#E9EFE6;
      --text:#1E1E1E;
      --muted:rgba(30,30,30,.68);
      --card:rgba(255,255,255,.62);
      --card2:rgba(255,255,255,.78);
      --cta:#FFB703;
      --ctaH:#FF9F1C;
      --accent:#2EC4B6;
      --shadow:0 10px 30px rgba(18,18,18,.08);
      --shadowS:0 8px 20px rgba(18,18,18,.06);
      --r:16px;
      --max:1160px;
      --ring:0 0 0 3px rgba(46,196,182,.25);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      background:
        radial-gradient(1200px 500px at 20% 0%, rgba(46,196,182,.12), transparent 60%),
        radial-gradient(900px 500px at 85% 10%, rgba(255,183,3,.14), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--text);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      line-height:1.5;
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    .container{width:min(var(--max),92vw);margin:0 auto}
    .skip{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip:focus{left:14px;top:14px;width:auto;height:auto;padding:10px 12px;border-radius:999px;background:rgba(255,255,255,.95);box-shadow:var(--shadow);z-index:999}
    .grain{
      pointer-events:none;position:fixed;inset:0;opacity:.20;mix-blend-mode:overlay;z-index:1;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
    }
    main, header, footer{position:relative;z-index:2}

    /* Nav */
    .nav{
      position:sticky;top:0;z-index:50;
      backdrop-filter:blur(10px);
      background:rgba(246,247,242,.72);
      border-bottom:1px solid rgba(30,30,30,.06);
    }
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 0;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;font-family:Poppins,Inter,sans-serif;font-weight:700;letter-spacing:-.02em}
    .logo{width:34px;height:34px;border-radius:12px;background:radial-gradient(circle at 30% 30%, rgba(255,183,3,.95), rgba(46,196,182,.95));box-shadow:var(--shadowS)}
    .links{display:none;gap:18px;color:var(--muted);font-weight:650;font-size:14px}
    .links a:hover{color:var(--text)}
    .actions{display:flex;gap:10px;align-items:center}
    @media(min-width:860px){.links{display:flex}}

    /* Buttons */
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:12px 16px;border-radius:999px;
      border:1px solid rgba(30,30,30,.10);
      background:rgba(255,255,255,.55);
      box-shadow:var(--shadowS);
      font-weight:800;cursor:pointer;
      transition:transform .18s ease, background .18s ease, box-shadow .18s ease;
      -webkit-tap-highlight-color:transparent;
      user-select:none;
    }
    .btn:active{transform:scale(.98)}
    .btn:focus-visible{outline:none;box-shadow:var(--shadowS),var(--ring)}
    .btn.primary{background:linear-gradient(180deg, var(--cta), var(--ctaH));border-color:rgba(0,0,0,.08)}
    .btn.primary:hover{transform:translateY(-1px);box-shadow:0 14px 30px rgba(255,159,28,.18),var(--shadowS)}
    .btn.ghost:hover{background:rgba(255,255,255,.78);transform:translateY(-1px)}
    .pill{padding:10px 12px;border-radius:999px;background:rgba(255,255,255,.65);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);font-weight:800;font-size:14px;cursor:pointer}
    .pill:active{transform:scale(.98)}
    .count{min-width:22px;height:22px;padding:0 7px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;font-weight:900;font-size:13px;background:rgba(46,196,182,.16);border:1px solid rgba(46,196,182,.35)}

    /* Reveal */
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease,transform .6s ease;will-change:opacity,transform}
    .reveal.in{opacity:1;transform:none}

    /* Hero */
    .hero{padding:54px 0 18px}
    .heroGrid{display:grid;grid-template-columns:1fr;gap:18px;align-items:center}
    .kicker{font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:rgba(30,30,30,.55)}
    h1{font-family:Poppins,Inter,sans-serif;letter-spacing:-.04em;line-height:1.08;font-size:clamp(32px,5vw,56px);margin:6px 0 10px}
    h2{font-family:Poppins,Inter,sans-serif;letter-spacing:-.03em;line-height:1.15;font-size:clamp(24px,3.2vw,36px);margin:6px 0 0}
    p{margin:0}
    .lead{color:var(--muted);font-size:clamp(15px,2vw,18px);max-width:60ch}
    .heroCtas{display:flex;flex-wrap:wrap;gap:10px;margin-top:16px}

    .heroCard{
      border-radius:24px;background:linear-gradient(180deg, rgba(255,255,255,.68), rgba(255,255,255,.44));
      border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadow);overflow:hidden;min-height:260px
    }
    .heroCardInner{padding:18px;display:flex;flex-direction:column;gap:12px}
    .badges{display:flex;flex-wrap:wrap;gap:8px}
    .badge{font-size:13px;font-weight:900;color:rgba(30,30,30,.80);background:rgba(233,239,230,.72);border:1px solid rgba(30,30,30,.08);padding:8px 10px;border-radius:999px}
    .visual{
      margin-top:auto;border-radius:18px;padding:16px;position:relative;overflow:hidden;
      background:
        radial-gradient(240px 160px at 20% 20%, rgba(46,196,182,.18), transparent 60%),
        radial-gradient(240px 160px at 80% 30%, rgba(255,183,3,.22), transparent 55%),
        linear-gradient(180deg, rgba(246,247,242,.2), rgba(233,239,230,.5));
      border:1px dashed rgba(30,30,30,.14);
    }
    .float{position:absolute;width:140px;height:140px;border-radius:32px;right:-24px;bottom:-24px;background:radial-gradient(circle at 30% 30%, rgba(255,183,3,.95), rgba(255,159,28,.25));box-shadow:0 30px 60px rgba(255,159,28,.18);opacity:.9}
    .float2{position:absolute;width:110px;height:110px;border-radius:28px;left:-18px;top:-18px;background:radial-gradient(circle at 30% 30%, rgba(46,196,182,.85), rgba(46,196,182,.18));box-shadow:0 26px 56px rgba(46,196,182,.16);opacity:.9}
    .visual h3{margin:0;font-family:Poppins,Inter,sans-serif;font-size:16px;letter-spacing:-.02em}
    .mini{margin-top:6px;color:var(--muted);font-size:14px;max-width:44ch}
    @media(min-width:980px){.heroGrid{grid-template-columns:1.15fr .85fr}.heroCardInner{padding:22px}}

    /* Sections */
    section{padding:54px 0}
    .head{display:flex;justify-content:space-between;align-items:flex-end;gap:14px;margin-bottom:18px}
    .sub{color:var(--muted);max-width:64ch;font-size:15.5px}

    /* Cards */
    .grid3{display:grid;gap:14px;grid-template-columns:1fr}
    .card{border-radius:var(--r);background:var(--card);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);padding:16px;position:relative;overflow:hidden}
    .card strong{font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em;font-size:16px}
    .card p{margin-top:8px;color:var(--muted)}
    @media(min-width:900px){.grid3{grid-template-columns:repeat(3,1fr)}.card{padding:18px}}

    /* Products */
    .products{display:grid;gap:14px;grid-template-columns:1fr}
    .product{
      border-radius:20px;background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.45));
      border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);overflow:hidden;
      transition:transform .2s ease, box-shadow .2s ease;display:flex;flex-direction:column
    }
    .product:hover{transform:translateY(-4px);box-shadow:0 14px 28px rgba(18,18,18,.10)}
    .media{
      aspect-ratio:16/11;position:relative;overflow:hidden;
      background:
        radial-gradient(240px 160px at 25% 30%, rgba(46,196,182,.18), transparent 60%),
        radial-gradient(240px 160px at 78% 35%, rgba(255,183,3,.22), transparent 55%),
        linear-gradient(180deg, rgba(233,239,230,.5), rgba(246,247,242,.35));
    }
    .label{position:absolute;left:14px;top:14px;z-index:2;display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.75);border:1px solid rgba(30,30,30,.10);font-weight:900;font-size:13px}
    .content{padding:14px 14px 16px;display:flex;flex-direction:column;gap:10px}
    .content h3{margin:0;font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em;font-size:18px}
    .emotion{color:var(--muted);font-weight:650;font-size:14.5px}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:2px}
    .price{font-weight:900}
    .miniBtn{padding:10px 12px;border-radius:999px;border:1px solid rgba(30,30,30,.10);background:rgba(255,255,255,.55);box-shadow:var(--shadowS);font-weight:900;cursor:pointer;transition:transform .18s ease, background .18s ease}
    .miniBtn:hover{background:rgba(255,255,255,.85);transform:translateY(-1px)}
    .miniBtn:disabled{opacity:.55;cursor:not-allowed;transform:none}
    @media(min-width:760px){.products{grid-template-columns:repeat(3,1fr)}}

    /* Trust row */
    .trust{display:grid;gap:14px;grid-template-columns:1fr}
    .tRow{display:flex;gap:12px;align-items:flex-start}
    .bub{width:40px;height:40px;border-radius:14px;display:grid;place-items:center;background:rgba(233,239,230,.9);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);font-weight:900;flex:0 0 auto}
    @media(min-width:900px){.trust{grid-template-columns:repeat(3,1fr)}}

    /* Vibe */
    .vibe{
      border-radius:24px;background:linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.38));
      border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadow);padding:16px
    }
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:10px 12px;border-radius:999px;background:rgba(233,239,230,.75);border:1px solid rgba(30,30,30,.08);font-weight:900;cursor:pointer;transition:transform .18s ease, background .18s ease}
    .chip:hover{transform:translateY(-1px);background:rgba(233,239,230,.95)}
    .chip[aria-pressed="true"]{background:rgba(46,196,182,.16);border-color:rgba(46,196,182,.45);box-shadow:0 10px 24px rgba(46,196,182,.12)}
    .vRes{margin-top:12px;border-radius:18px;background:rgba(246,247,242,.55);border:1px solid rgba(30,30,30,.08);padding:14px;display:grid;gap:10px}
    .vRes strong{font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em}
    .vCtas{display:flex;gap:10px;flex-wrap:wrap}
    @media(min-width:900px){.vibe{padding:22px}}

    /* IG */
    .igWrap{border-radius:24px;overflow:hidden;border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadow);background:rgba(255,255,255,.55)}
    .igIframe{width:100%;border:0;overflow:hidden;height:520px}
    @media(max-width:520px){.igIframe{height:520px}}

    /* Footer */
    footer{padding:28px 0 44px;background:rgba(233,239,230,.55);border-top:1px solid rgba(30,30,30,.06)}
    .foot{display:grid;gap:16px;grid-template-columns:1fr;align-items:flex-start}
    .footLinks{display:flex;gap:12px;flex-wrap:wrap;color:rgba(30,30,30,.70);font-weight:800;font-size:14px}
    .footLinks a:hover{color:var(--text)}
    @media(min-width:900px){.foot{grid-template-columns:1.1fr .9fr}.footLinks{justify-content:flex-end}}

    /* Drawer */
    .ov{position:fixed;inset:0;background:rgba(0,0,0,.28);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:80}
    .ov.open{opacity:1;pointer-events:auto}
    .drawer{
      position:fixed;top:0;right:0;height:100dvh;width:min(420px,92vw);
      background:rgba(246,247,242,.92);border-left:1px solid rgba(30,30,30,.10);backdrop-filter:blur(12px);
      transform:translateX(102%);transition:transform .22s ease;z-index:90;display:flex;flex-direction:column
    }
    .drawer.open{transform:none}
    .dHead{padding:16px 16px 12px;display:flex;align-items:center;justify-content:space-between;gap:10px;border-bottom:1px solid rgba(30,30,30,.08)}
    .dHead strong{font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em}
    .dBody{padding:14px 16px;overflow:auto;flex:1}
    .line{height:1px;background:rgba(30,30,30,.08);margin:12px 0}
    .empty{padding:14px;border-radius:16px;background:rgba(255,255,255,.6);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);color:var(--muted)}
    .item{display:grid;grid-template-columns:1fr auto;gap:10px;padding:12px;border-radius:16px;background:rgba(255,255,255,.6);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);margin-bottom:10px}
    .item h4{margin:0;font-family:Poppins,Inter,sans-serif;font-size:15px;letter-spacing:-.02em}
    .meta{color:var(--muted);font-weight:650;font-size:13px;margin-top:4px}
    .qtyRow{display:flex;align-items:center;gap:8px;justify-content:flex-end}
    .qBtn{width:34px;height:34px;border-radius:12px;border:1px solid rgba(30,30,30,.12);background:rgba(255,255,255,.75);box-shadow:var(--shadowS);cursor:pointer;font-weight:900}
    .qty{min-width:30px;text-align:center;font-weight:900}
    .dFoot{padding:14px 16px 16px;border-top:1px solid rgba(30,30,30,.08);background:rgba(246,247,242,.92)}
    .sum{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:6px 0;color:rgba(30,30,30,.85);font-weight:750}
    .sum strong{font-weight:900}
    .dCtas{display:flex;gap:10px;margin-top:12px}
    .dCtas .btn{flex:1}

    /* Checkout modal */
    .mOv{position:fixed;inset:0;background:rgba(0,0,0,.30);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:100;display:grid;place-items:center;padding:18px}
    .mOv.open{opacity:1;pointer-events:auto}
    .modal{width:min(760px,96vw);border-radius:24px;background:rgba(246,247,242,.96);border:1px solid rgba(30,30,30,.10);box-shadow:0 18px 60px rgba(0,0,0,.18);overflow:hidden}
    .mHead{padding:16px 16px 12px;display:flex;justify-content:space-between;align-items:center;gap:10px;border-bottom:1px solid rgba(30,30,30,.08)}
    .mHead strong{font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em}
    .mBody{padding:16px;display:grid;gap:14px}
    .grid{display:grid;gap:14px;grid-template-columns:1fr}
    @media(min-width:860px){.grid{grid-template-columns:1.05fr .95fr}}
    .panel{border-radius:18px;background:rgba(255,255,255,.62);border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);padding:14px}
    .panel h4{margin:0 0 10px;font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em}
    label{display:block;font-weight:750;font-size:13px;color:rgba(30,30,30,.78);margin:10px 0 6px}
    input, textarea{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid rgba(30,30,30,.12);
      background:rgba(255,255,255,.82);font:inherit;outline:none;transition:box-shadow .18s ease, border-color .18s ease
    }
    textarea{min-height:86px;resize:vertical}
    input:focus, textarea:focus{box-shadow:var(--ring);border-color:rgba(46,196,182,.55)}
    .radioRow{display:flex;gap:10px;flex-wrap:wrap}
    .radio{flex:1 1 210px;padding:12px;border-radius:16px;border:1px solid rgba(30,30,30,.10);background:rgba(255,255,255,.75);box-shadow:var(--shadowS);cursor:pointer;display:flex;gap:10px;align-items:flex-start}
    .radio input{width:auto;margin-top:2px}
    .radio strong{font-size:14px}
    .radio small{display:block;color:var(--muted);margin-top:2px}
    .hint{font-size:12.5px;color:var(--muted);margin-top:8px}
    .msg{display:none;border-radius:16px;padding:10px 12px;font-weight:800}
    .msg.err{background:rgba(230,57,70,.10);border:1px solid rgba(230,57,70,.28);color:rgba(30,30,30,.86)}
    .msg.ok{background:rgba(46,196,182,.12);border:1px solid rgba(46,196,182,.28);color:rgba(30,30,30,.86)}
    .msg.show{display:block}

    /* Toast */
    #toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      padding:12px 14px;border-radius:999px;background:rgba(255,255,255,.88);
      border:1px solid rgba(30,30,30,.10);box-shadow:0 16px 46px rgba(0,0,0,.16);
      font-weight:800;color:rgba(30,30,30,.86);
      opacity:0;pointer-events:none;transition:opacity .18s ease, transform .18s ease;
      z-index:120;max-width:min(92vw,720px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    }

    /* Reels preview */
    .reelGrid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:10px 0 12px}
    .reelCard{position:relative;border-radius:18px;overflow:hidden;border:1px solid rgba(30,30,30,.08);box-shadow:var(--shadowS);background:rgba(255,255,255,.55);aspect-ratio:9/16}
    .reelCard video,.reelCard img{width:100%;height:100%;object-fit:cover;display:block}
    .rOv{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.24));opacity:0;transition:opacity .18s ease;display:flex;align-items:flex-end;justify-content:space-between;padding:12px;color:rgba(255,255,255,.92);font-weight:900;gap:10px}
    .reelCard:hover .rOv{opacity:1}
    .rTag{padding:6px 8px;border-radius:999px;background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.20);backdrop-filter:blur(6px);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:78%}
    .rPlay{width:36px;height:36px;border-radius:14px;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.22);display:grid;place-items:center}
    @media(min-width:900px){.reelGrid{grid-template-columns:repeat(6,1fr)}}

    @media (prefers-reduced-motion:reduce){
      html{scroll-behavior:auto}
      .reveal{opacity:1;transform:none}
      .btn,.miniBtn,.product,.drawer,.mOv{transition:none}
    }
  

    /* Hero image */
    #heroImg{
      width:100%;
      height:168px;
      object-fit:cover;
      border-radius:16px;
      display:block;
      margin-bottom:12px;
      box-shadow:0 14px 30px rgba(18,18,18,.10);
      border:1px solid rgba(30,30,30,.08);
      background:
        radial-gradient(240px 160px at 25% 30%, rgba(46,196,182,.18), transparent 60%),
        radial-gradient(240px 160px at 78% 35%, rgba(255,183,3,.22), transparent 55%),
        linear-gradient(180deg, rgba(233,239,230,.5), rgba(246,247,242,.35));
    }
    @media(min-width:980px){
      #heroImg{ height:188px; }
    }


    /* Device optimizations */
    img, video { max-width: 100%; height: auto; }
    .container { padding-left: 0; padding-right: 0; }
    /* Better spacing on small phones */
    @media (max-width: 420px){
      .nav-inner{padding:12px 0}
      .pill{padding:9px 10px;font-size:13px}
      .btn{padding:11px 14px}
      .hero{padding:44px 0 12px}
      .heroCtas{gap:8px}
      .card{padding:14px}
      section{padding:44px 0}
      #toast{white-space:normal;text-align:center}
      .drawer{width:min(420px,96vw)}
      .modal{width:min(760px,98vw)}
    }
    /* Tablets */
    @media (min-width: 600px) and (max-width: 980px){
      .hero{padding:56px 0 18px}
      section{padding:58px 0}
      .products{grid-template-columns:repeat(2,1fr)}
      .reelGrid{grid-template-columns:repeat(3,1fr)}
      .igIframe{height:560px}
    }
    /* Large desktops */
    @media (min-width: 1200px){
      .hero{padding:64px 0 22px}
      .heroCard{min-height:320px}
      .igIframe{height:640px}
    }
    /* Safer tap targets */
    button, a.btn, .pill, .miniBtn, .chip, .qBtn{min-height:44px}
    /* Prevent layout shift for iframe container */
    .igWrap{content-visibility:auto;contain-intrinsic-size:520px}
</style>
<meta content="makhana, fox nuts, roasted makhana, healthy snacks, premium snacks, Popkaari, peri peri makhana, classic salted makhana, raw makhana, Indian snacks" name="keywords"/></head>
<body>
<a class="skip" href="#main">Skip to content</a>
<div aria-hidden="true" class="grain"></div>
<noscript>
<div style="padding:14px;margin:14px;border-radius:16px;background:rgba(255,183,3,.18);border:1px solid rgba(30,30,30,.10);font-weight:800;">
      JavaScript is required for cart + checkout. Please enable JavaScript and reload.
    </div>
</noscript>
<header class="nav" role="banner">
<div class="container nav-inner">
<a aria-label="Popkaari home" class="brand" href="#top">
<span aria-hidden="true" class="logo"></span>
<span>Popkaari</span>
</a>
<nav aria-label="Primary" class="links">
<a href="#story">Why Popkaari</a>
<a href="#products">Flavours</a>
<a href="#trust">Trust</a>
<a href="#vibe">Snack by vibe</a>
</nav>
<div class="actions">
<button class="pill" id="openCheckoutTop" type="button">Checkout</button>
<button class="pill" id="openCart" type="button">Cart <span class="count" id="cartCount">0</span></button>
</div>
</div>
</header>
<!-- Cart Drawer -->
<div aria-hidden="true" class="ov" id="ov"></div>
<aside aria-hidden="true" aria-label="Cart drawer" class="drawer" id="drawer">
<div class="dHead">
<strong>Your Cart</strong>
<button class="pill" id="closeCart" type="button">Close</button>
</div>
<div class="dBody">
<div id="cartItems"></div>
<div class="line"></div>
<div class="hint"><strong>Small-batch note:</strong> Limited runs for freshness.</div>
</div>
<div class="dFoot">
<div class="sum"><span>Subtotal</span><strong id="subTotal">‚Çπ0</strong></div>
<div class="sum"><span>Shipping</span><strong id="shipFee">‚Çπ0</strong></div>
<div class="sum"><span>Total</span><strong id="grandTotal">‚Çπ0</strong></div>
<div class="dCtas">
<button class="btn ghost" id="clearCart" type="button">Clear</button>
<button class="btn primary" id="checkoutBtn" type="button">Checkout</button>
</div>
<div class="hint">Free shipping above ‚Çπ499 ‚Ä¢ Otherwise ‚Çπ49</div>
</div>
</aside>
<!-- Checkout Modal -->
<div aria-hidden="true" class="mOv" id="mOv">
<div aria-label="Checkout" aria-modal="true" class="modal" role="dialog">
<div class="mHead">
<strong>Checkout</strong>
<button class="pill" id="closeCheckout" type="button">Close</button>
</div>
<div class="mBody">
<div class="msg err" id="errBox"></div>
<div class="msg ok" id="okBox"></div>
<div class="grid">
<div class="panel">
<h4>Your details</h4>
<label for="name">Full name</label>
<input autocomplete="name" id="name" placeholder="e.g., Aman Sharma"/>
<label for="phone">Phone (WhatsApp)</label>
<input autocomplete="tel" id="phone" inputmode="tel" placeholder="e.g., 9XXXXXXXXX"/>
<label for="email">Email (optional)</label>
<input autocomplete="email" id="email" inputmode="email" placeholder="e.g., you@gmail.com"/>
<label for="address">Delivery address</label>
<textarea autocomplete="street-address" id="address" placeholder="House/Flat, Area, City, State, Pincode"></textarea>
<label for="notes">Order note (optional)</label>
<textarea id="notes" placeholder="e.g., Leave at security / call before delivery"></textarea>
</div>
<div class="panel">
<h4>Order summary</h4>
<div id="summary"></div>
<div class="line"></div>
<div class="sum"><span>Subtotal</span><strong id="cSub">‚Çπ0</strong></div>
<div class="sum"><span>Shipping</span><strong id="cShip">‚Çπ0</strong></div>
<div class="sum"><span>Total</span><strong id="cTotal">‚Çπ0</strong></div>
<div class="line"></div>
<h4>Payment</h4>
<div aria-label="Payment method" class="radioRow" role="radiogroup">
<label class="radio"><input checked="" name="pay" type="radio" value="cod"/>
<div><strong>Cash on Delivery</strong><small>Confirm on WhatsApp</small></div>
</label>
<label class="radio"><input name="pay" type="radio" value="upi"/>
<div><strong>UPI (link/QR)</strong><small>We‚Äôll share UPI link on WhatsApp</small></div>
</label>
<label class="radio"><input name="pay" type="radio" value="razorpay"/>
<div><strong>Online (Razorpay)</strong><small>Card/UPI/Netbanking</small></div>
</label>
</div>
<div class="hint">Payment made simple. You‚Äôll get confirmation + delivery ETA on WhatsApp.</div>
<div class="line"></div>
<button class="btn primary" id="placeOrder" type="button">Place order ‚Üí</button>
<button class="btn ghost" id="whatsAppOnly" style="margin-top:10px;" type="button">Order on WhatsApp</button>
<button class="btn ghost" id="copyMsg" style="margin-top:10px;" type="button">Copy order message</button>
</div>
</div>
</div>
</div>
</div>
<div aria-live="polite" id="toast"></div>
<main id="main">
<section class="hero" id="top">
<div class="container heroGrid">
<div class="reveal">
<div class="kicker">Premium roasted makhana</div>
<h1>Snack light. Crunch happy.</h1>
<p class="lead">Premium roasted makhana crafted for workdays, travel, chai breaks and guilt-free cravings.</p>
<div class="heroCtas">
<a class="btn primary" href="#products">Explore Flavours ‚Üí</a>
<a class="btn ghost" href="#story">Why Popkaari?</a>
</div>
</div>
<aside class="heroCard reveal">
<div class="heroCardInner">
<div class="badges">
<span class="badge">No greasy mess</span>
<span class="badge">Office &amp; travel friendly</span>
<span class="badge">Made for Indian tastebuds</span>
</div>
<div aria-label="Abstract premium visual" class="visual">
<div aria-hidden="true" class="float"></div>
<div aria-hidden="true" class="float2"></div>
<img alt="Popkaari premium makhana in a bowl" decoding="async" fetchpriority="high" height="700" id="heroImg" loading="eager" src="assets/hero.jpg" width="1200"/><h3>Why people are switching</h3>
<p class="mini">Light, airy crunch built for chai breaks, office drawers, travel and gifting ‚Äî without the greasy heaviness.</p>
<p class="mini"><strong>Popkaari promise:</strong> taste + trust, in the same bowl.</p>
</div>
</div>
</aside>
</div>
</section>
<section id="story">
<div class="container">
<div class="head reveal">
<div>
<div class="kicker">Story over features</div>
<h2>Why Popkaari wins</h2>
</div>
<p class="sub">Premium roasted makhana with bold desi flavors ‚Äî designed to feel light, clean, and binge-able.</p>
</div>
<div class="grid3">
<div class="card reveal"><strong>Light &amp; crunchy</strong><p>Airy bite, not heavy.</p></div>
<div class="card reveal"><strong>Bold but balanced</strong><p>Flavor that doesn‚Äôt overpower.</p></div>
<div class="card reveal"><strong>Desk-friendly</strong><p>No oil, no mess.</p></div>
</div>
</div>
</section>
<section id="vibe">
<div class="container">
<div class="head reveal">
<div>
<div class="kicker">Interactive</div>
<h2>Find your flavor</h2>
</div>
<p class="sub">Pick a mood. We‚Äôll recommend the crunch that fits your moment.</p>
</div>
<div aria-label="Snack by vibe" class="vibe reveal">
<div style="display:flex;flex-direction:column;gap:12px">
<strong style="font-family:Poppins,Inter,sans-serif;letter-spacing:-.02em">What do you want to feel right now?</strong>
<div aria-label="Vibe options" class="chips" role="group">
<button aria-pressed="true" class="chip" data-vibe="calm" type="button">Calm</button>
<button aria-pressed="false" class="chip" data-vibe="focus" type="button">Focus</button>
<button aria-pressed="false" class="chip" data-vibe="cozy" type="button">Cozy</button>
<button aria-pressed="false" class="chip" data-vibe="fun" type="button">Fun</button>
<button aria-pressed="false" class="chip" data-vibe="bold" type="button">Bold</button>
</div>
</div>
<div aria-live="polite" class="vRes">
<strong id="vTitle">Calm vibe ‚Üí Classic Salted</strong>
<p class="sub" id="vCopy">Ritual: take a slow bite, breathe out, then take one more. The snack break that actually resets you.</p>
<div class="vCtas">
<button class="btn primary" id="vAdd" type="button">Add recommended flavour ‚Üí</button>
<button class="btn ghost" id="vCheckout" type="button">Checkout</button>
</div>
</div>
</div>
</div>
</section><section id="products">
<div class="container">
<div class="head reveal">
<div>
<div class="kicker">Flavours</div>
<h2>Pick your crunch</h2>
</div>
<p class="sub">Three core flavors. Light on the stomach, big on cravings ‚Äî made for Indian tastebuds.</p>
</div>
<div class="products" id="productGrid"></div><div class="grid3" id="ordering" style="margin-top:16px"><div class="card reveal"><strong>1Ô∏è‚É£ Choose your pack</strong><p>Select Starter, Value or Family Pack.</p></div><div class="card reveal"><strong>2Ô∏è‚É£ WhatsApp us</strong><p>Tap the order button and send the auto-filled message.</p></div><div class="card reveal"><strong>3Ô∏è‚É£ We confirm &amp; dispatch</strong><p>Fast response, secure payment, quick delivery.</p></div></div>
</div>
</section>
<section id="trust">
<div class="container">
<div class="head reveal">
<div>
<div class="kicker">Trust &amp; transparency</div>
<h2>How Popkaari is made</h2>
</div>
<p class="sub">Small batches. Clean ingredients. Calm crunch ‚Äî the kind of transparency you can taste.</p>
</div>
<div class="trust">
<div class="card reveal tRow"><div class="bub">‚ü°</div><div><strong>Roasted, not fried</strong><p>Airy bite that feels light ‚Äî made for everyday snacking.</p></div></div>
<div class="card reveal tRow"><div class="bub">‚óé</div><div><strong>Honest ingredients</strong><p>No junk. No confusing claims. Just clear labels and clean seasonings.</p></div></div>
<div class="card reveal tRow"><div class="bub">‚úì</div><div><strong>Freshness locked</strong><p>Packed fresh to keep that just-opened crunch.</p></div></div>
</div>
</div>
</section>
<section id="ig">
<div class="container">
<div class="head reveal">
<div>
<div class="kicker">Real &amp; warm</div>
<h2>Popkaari, live on Instagram.</h2>
</div>
<p class="sub">Fresh drops, real snack moments, and unfiltered joy ‚Äî straight from @popkaari.</p>
</div>
<div aria-label="Reels hover previews" class="reelGrid reveal" id="reelGrid"></div>
<div class="igWrap reveal">
<iframe class="igIframe" loading="lazy" referrerpolicy="no-referrer" sandbox="allow-scripts allow-same-origin allow-popups allow-forms" scrolling="no" src="https://snapwidget.com/embed/1055487" title="Popkaari Instagram Feed">
</iframe>
</div>
<div class="reveal" style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
<a class="btn ghost" href="https://instagram.com/popkaari" rel="noopener noreferrer" target="_blank">Follow @popkaari</a>
<button class="btn primary" id="igCheckout" type="button">Order your vibe ‚Üí</button>
</div>
</div>
</section>
<section>
<div class="container">
<div class="card reveal" style="border-radius:28px;padding:18px;background:
          radial-gradient(900px 360px at 15% 10%, rgba(46,196,182,.20), transparent 60%),
          radial-gradient(900px 360px at 85% 20%, rgba(255,183,3,.22), transparent 60%),
          linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.40));
          box-shadow:var(--shadow);">
<div class="kicker">Ready when you are</div>
<h2 style="margin-top:6px">Get first access + launch deals</h2>
<p class="sub" style="margin-top:8px">Be first to know when small batches drop. Tap order anytime ‚Äî we‚Äôll confirm on WhatsApp.</p>
<div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
<button class="btn primary" id="ctaCheckout" type="button">Checkout</button>
<a class="btn ghost" href="#products">Explore flavours</a>
</div>
</div>
</div>
</section>
<footer role="contentinfo">
<div class="container foot">
<div>
<div class="brand" style="margin-bottom:8px"><span aria-hidden="true" class="logo"></span><span>Popkaari</span></div>
<small style="color:var(--muted)">Calm crunch. Honest ingredients. Small batches.</small><br/>
<small style="color:var(--muted)">¬© <span id="year"></span> Popkaari. All rights reserved.</small>
</div>
<div aria-label="Footer" class="footLinks">
<a href="#trust">Ingredients</a>
<a href="#products">Shop</a>
<a href="#vibe">Snack by vibe</a>
<a href="#top">Back to top</a>
</div>
</div>
</footer>
</main>
<script>
  (function(){
    "use strict";

    // ----------------------------
    // Config (edit these)
    // ----------------------------
    const STORE = {
      brand: "Popkaari",
      currency: "‚Çπ",
      whatsappNumber: "91XXXXXXXXXX", // e.g. 919876543210
      freeShipAbove: 499,
      shipFee: 49,
      razorpayPaymentPageUrl: "", // optional
      // Analytics (optional)
      ga4MeasurementId: "G-XXXXXXXXXX",
      metaPixelId: "000000000000000"
    };

    const PRODUCTS = [
      { sku:"classic", name:"Classic Salted", price:199, vibe:"calm", tag:"Classic ‚Ä¢ Clean", emotion:"Clean, airy crunch with that ‚Äúone more handful‚Äù vibe." },
      { sku:"peri", name:"Peri Peri Blast", price:219, vibe:"bold", tag:"Peri Peri ‚Ä¢ Party", emotion:"Tangy, bold heat built for binge-watching and hangouts." },
      { sku:"raw", name:"Raw Makhana", price:169, vibe:"focus", tag:"Raw ‚Ä¢ Versatile", emotion:"Pure + versatile. Roast, toss into kheer, or build your own mixes." },
    ];

    // Reels hover preview (host these assets yourself in /assets/ or a CDN)
    const REELS = [
      // { poster:"assets/reel1.jpg", video:"assets/reel1.mp4", label:"Desk snack energy" },
      // { poster:"assets/reel2.jpg", video:"assets/reel2.mp4", label:"Movie-night ritual" },
      // { poster:"assets/reel3.jpg", video:"assets/reel3.mp4", label:"Gym bag essential" },
      // { poster:"assets/reel4.jpg", video:"assets/reel4.mp4", label:"POV: craving hits" },
      // { poster:"assets/reel5.jpg", video:"assets/reel5.mp4", label:"Small-batch drop" },
      // { poster:"assets/reel6.jpg", video:"assets/reel6.mp4", label:"Snack by vibe" },
    ];

    // ----------------------------
    // Helpers
    // ----------------------------
    const qs = (s, el=document) => el.querySelector(s);
    const qsa = (s, el=document) => [...el.querySelectorAll(s)];
    const money = (n) => `${STORE.currency}${n}`;
    const safe = (s) => String(s ?? "").replace(/[<>]/g, "");
    const nowId = () => `PK-${Date.now().toString(36).toUpperCase()}`;

    // Storage safety
    const __mem = {};
    const store = {
      get(k){ try{return localStorage.getItem(k);}catch(_){ return __mem[k] ?? null; } },
      set(k,v){ try{localStorage.setItem(k,v);}catch(_){ __mem[k]=v; } }
    };

    function toast(msg){
      const t = qs("#toast"); if(!t) return;
      t.textContent = msg;
      t.style.opacity = "1";
      t.style.transform = "translateX(-50%) translateY(-2px)";
      clearTimeout(window.__toastT);
      window.__toastT = setTimeout(()=>{
        t.style.opacity = "0";
        t.style.transform = "translateX(-50%) translateY(0px)";
      }, 2200);
    }

    // Reveal on scroll
    (function(){
      const els = qsa(".reveal");
      if(!("IntersectionObserver" in window)){ els.forEach(el=>el.classList.add("in")); return; }
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ e.target.classList.add("in"); io.unobserve(e.target); }
        });
      }, {threshold:0.12});
      els.forEach(el=>io.observe(el));
    })();

    // ----------------------------
    // Analytics (safe load)
    // ----------------------------
    function track(name, params){
      try{
        if(window.gtag) window.gtag("event", name, params || {});
        if(window.fbq){
          if(name === "add_to_cart") fbq("track","AddToCart", params||{});
          if(name === "begin_checkout") fbq("track","InitiateCheckout", params||{});
          if(name === "purchase") fbq("track","Purchase", params||{});
        }
      }catch(_){}
    }

    (function loadAnalytics(){
      const ga = (STORE.ga4MeasurementId || "").trim();
      if(ga && ga.startsWith("G-") && !ga.includes("XXXX")){
        const s = document.createElement("script");
        s.async = true;
        s.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(ga);
        document.head.appendChild(s);
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        window.gtag = gtag;
        gtag("js", new Date());
        gtag("config", ga, { anonymize_ip:true });
      }

      const px = (STORE.metaPixelId || "").trim();
      if(px && /^[0-9]{8,20}$/.test(px)){
        !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
        n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq("init", px);
        fbq("track","PageView");
      }
    })();

    // ----------------------------
    // Stock (always in stock)
    // ----------------------------
    // Requirement: keep all 3 products in stock at all times.
    // We still show a "packs left" number, but we prevent it from ever reaching 0.
    const STOCK_KEY = "popkaari_stock_always_v1";
    function getStockObj(){
      try{
        const raw = store.get(STOCK_KEY);
        if(raw){
          const obj = JSON.parse(raw);
          if(obj && obj.stock) return obj;
        }
      }catch(_){}
      const stock = {};
      PRODUCTS.forEach(p => stock[p.sku] = 99); // always available
      const obj = { stock };
      store.set(STOCK_KEY, JSON.stringify(obj));
      return obj;
    }
    function getStock(sku){ const o=getStockObj(); return Math.max(1, (o.stock?.[sku] ?? 99)); }
    function setStock(sku, n){
      const o=getStockObj();
      // never allow stock below 1
      o.stock[sku] = Math.max(1, n);
      store.set(STOCK_KEY, JSON.stringify(o));
    }

    // ----------------------------
    // Cart
    // ----------------------------
    const CART_KEY = "popkaari_cart_clean_v1";
    function getCart(){
      try{ const raw = store.get(CART_KEY); return raw ? JSON.parse(raw) : {}; }catch(_){ return {}; }
    }
    function setCart(cart){ store.set(CART_KEY, JSON.stringify(cart)); }
    function cartCount(){ return Object.values(getCart()).reduce((a,b)=>a+b,0); }

    function calcTotals(){
      const cart = getCart();
      const items = Object.entries(cart).map(([sku,qty])=>{
        const p = PRODUCTS.find(x=>x.sku===sku);
        return p ? {...p, qty, line:p.price*qty} : null;
      }).filter(Boolean);
      const subtotal = items.reduce((s,i)=>s+i.line,0);
      const ship = subtotal===0 ? 0 : (subtotal>=STORE.freeShipAbove ? 0 : STORE.shipFee);
      return {items, subtotal, ship, total: subtotal+ship};
    }

    function refreshStockUI(){
      qsa("[data-stock]").forEach(el=>{
        const sku = el.getAttribute("data-stock");
        el.textContent = String(getStock(sku));
      });
      qsa(".addBtn").forEach(btn=>{
        const sku = btn.getAttribute("data-sku");
        const s = getStock(sku);
        if(s<=0){ btn.disabled=true; btn.textContent="Out of stock"; }
        else { btn.disabled=false; btn.textContent="Add to cart"; }
      });
    }

    function addToCart(sku, qty=1){
      const available = getStock(sku);
      if(available<=0){ toast("Added to cart ‚ú®"); return; }
      setStock(sku, available-qty);
      const cart = getCart();
      cart[sku] = (cart[sku]||0) + qty;
      setCart(cart);
      renderCart();
      track("add_to_cart", {currency:"INR", value:(PRODUCTS.find(p=>p.sku===sku)?.price||0)*qty});
      openDrawer();
    }

    function updateQty(sku, delta){
      const cart = getCart();
      const cur = cart[sku] || 0;
      if(delta>0){
        const available = getStock(sku);
        if(available<=0){ toast("Added ‚ú®"); return; }
        setStock(sku, available-delta);
        cart[sku] = cur + delta;
      }else if(delta<0){
        if(cur<=0) return;
        setStock(sku, getStock(sku) + Math.abs(delta));
        cart[sku] = Math.max(0, cur + delta);
        if(cart[sku]===0) delete cart[sku];
      }
      setCart(cart);
      renderCart();
    }

    function clearCart(){
      // Keep stock consumed (scarcity stays credible)
      setCart({});
      renderCart();
    }

    // ----------------------------
    // Render products
    // ----------------------------
    function renderProducts(){
      const grid = qs("#productGrid");
      grid.innerHTML = PRODUCTS.map(p=>{
        const stock = getStock(p.sku);
        const disabled = stock<=0 ? "disabled" : "";
        const btnText = stock<=0 ? "Out of stock" : "Add to cart";
        return `
          <article class="product reveal">
            <div class="media">
              <div class="label">${safe(p.tag)}</div>
            </div>
            <div class="content">
              <h3>${safe(p.name)}</h3>
              <div class="emotion">‚Äú${safe(p.emotion)}‚Äù</div>
              <div class="emotion" style="font-weight:850;color:rgba(30,30,30,.78);margin-top:-4px">
                Only <span data-stock="${safe(p.sku)}">${stock}</span> packs left
              </div>
              <div class="row">
                <span class="price">${money(p.price)}</span>
                <button class="miniBtn addBtn" type="button" data-sku="${safe(p.sku)}" ${disabled}>${btnText}</button>
              </div>
            </div>
          </article>
        `;
      }).join("");

      
      // Newly injected cards won‚Äôt be in the initial IntersectionObserver; reveal them now
      qsa("#productGrid .reveal").forEach(el=>el.classList.add("in"));
qsa(".addBtn").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          if(btn.disabled) return;
          addToCart(btn.getAttribute("data-sku"), 1);
        });
      });

      refreshStockUI();
      qsa("#ordering .reveal").forEach(el=>el.classList.add("in"));
    }

    // ----------------------------
    // Drawer controls
    // ----------------------------
    const ov = qs("#ov");
    const drawer = qs("#drawer");
    function openDrawer(){
      ov.classList.add("open"); drawer.classList.add("open");
      drawer.setAttribute("aria-hidden","false"); ov.setAttribute("aria-hidden","false");
      document.body.style.overflow="hidden";
    }
    function closeDrawer(){
      ov.classList.remove("open"); drawer.classList.remove("open");
      drawer.setAttribute("aria-hidden","true"); ov.setAttribute("aria-hidden","true");
      document.body.style.overflow="";
    }
    qs("#openCart").addEventListener("click", openDrawer);
    qs("#closeCart").addEventListener("click", closeDrawer);
    ov.addEventListener("click", closeDrawer);

    // ----------------------------
    // Cart render
    // ----------------------------
    function renderCart(){
      const {items, subtotal, ship, total} = calcTotals();
      qs("#cartCount").textContent = String(cartCount());

      const mount = qs("#cartItems");
      if(items.length===0){
        mount.innerHTML = `<div class="empty">Your cart is empty. Pick your pack ‚Üí tap order ‚ú®</div>`;
      }else{
        mount.innerHTML = items.map(i=>`
          <div class="item">
            <div>
              <h4>${safe(i.name)}</h4>
              <div class="meta">${money(i.price)} √ó ${i.qty} ‚Ä¢ <strong>${money(i.line)}</strong></div>
            </div>
            <div class="qtyRow">
              <button class="qBtn" type="button" data-act="dec" data-sku="${safe(i.sku)}">‚àí</button>
              <div class="qty">${i.qty}</div>
              <button class="qBtn" type="button" data-act="inc" data-sku="${safe(i.sku)}">+</button>
            </div>
          </div>
        `).join("");
      }

      qs("#subTotal").textContent = money(subtotal);
      qs("#shipFee").textContent = money(ship);
      qs("#grandTotal").textContent = money(total);

      qsa(".qBtn").forEach(b=>{
        b.addEventListener("click", ()=>{
          const sku = b.getAttribute("data-sku");
          const act = b.getAttribute("data-act");
          updateQty(sku, act==="inc" ? 1 : -1);
        });
      });

      refreshStockUI();
      renderSummary();
    }

    qs("#clearCart").addEventListener("click", clearCart);

    // ----------------------------
    // Checkout modal
    // ----------------------------
    const mOv = qs("#mOv");
    function openCheckout(){
      renderSummary();
      mOv.classList.add("open"); mOv.setAttribute("aria-hidden","false");
      document.body.style.overflow="hidden";
      const t=calcTotals(); track("begin_checkout", {currency:"INR", value:t.total});
    }
    function closeCheckout(){
      mOv.classList.remove("open"); mOv.setAttribute("aria-hidden","true");
      document.body.style.overflow="";
    }

    qs("#checkoutBtn").addEventListener("click", ()=>{ closeDrawer(); openCheckout(); });
    qs("#openCheckoutTop").addEventListener("click", openCheckout);
    qs("#ctaCheckout").addEventListener("click", openCheckout);
    qs("#vCheckout").addEventListener("click", openCheckout);
    qs("#igCheckout").addEventListener("click", openCheckout);
    qs("#closeCheckout").addEventListener("click", closeCheckout);
    mOv.addEventListener("click", (e)=>{ if(e.target===mOv) closeCheckout(); });

    window.addEventListener("keydown", (e)=>{
      if(e.key==="Escape"){ closeDrawer(); closeCheckout(); }
    });

    const errBox = qs("#errBox");
    const okBox = qs("#okBox");

    function showErr(msg){ errBox.textContent = msg; errBox.classList.add("show"); okBox.classList.remove("show"); }
    function showOk(msg){ okBox.innerHTML = msg; okBox.classList.add("show"); errBox.classList.remove("show"); }

    function getPay(){
      const r = qs('input[name="pay"]:checked');
      return r ? r.value : "cod";
    }

    function validate(){
      const {items,total} = calcTotals();
      if(items.length===0) return "Your cart is empty. Please add a flavour first.";
      const name = qs("#name").value.trim();
      const phone = qs("#phone").value.trim().replace(/\D/g,"");
      const address = qs("#address").value.trim();
      if(!name) return "Please enter your full name.";
      if(phone.length<10) return "Please enter a valid phone number (10 digits).";
      if(address.length<10) return "Please enter your full delivery address.";
      if(total<=0) return "Total is invalid. Please try again.";
      return null;
    }

    function buildText(orderId){
      const {items,subtotal,ship,total} = calcTotals();
      const name = safe(qs("#name").value.trim());
      const phone = safe(qs("#phone").value.trim());
      const email = safe(qs("#email").value.trim());
      const address = safe(qs("#address").value.trim());
      const notes = safe(qs("#notes").value.trim());
      const pay = getPay();

      const lines = [];
      lines.push(`üü° *${STORE.brand} Order*`);
      lines.push(`Order ID: *${orderId}*`);
      lines.push(`‚Äî`);
      lines.push(`Name: ${name}`);
      lines.push(`Phone: ${phone}`);
      if(email) lines.push(`Email: ${email}`);
      lines.push(`Address: ${address}`);
      if(notes) lines.push(`Note: ${notes}`);
      lines.push(`‚Äî`);
      lines.push(`Items:`);
      items.forEach(i=>lines.push(`‚Ä¢ ${i.name} √ó ${i.qty} = ${money(i.line)}`));
      lines.push(`‚Äî`);
      lines.push(`Subtotal: ${money(subtotal)}`);
      lines.push(`Shipping: ${money(ship)}`);
      lines.push(`Total: *${money(total)}*`);
      lines.push(`Payment: *${pay.toUpperCase()}*`);
      lines.push(`‚Äî`);
      lines.push(`Please confirm availability + delivery ETA. ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶ üôè`);
      return lines.join("\n");
    }

    function openWA(text){
      const num = (STORE.whatsappNumber || "").replace(/\D/g,"");
      const url = num ? `https://wa.me/${num}?text=${encodeURIComponent(text)}` : `https://wa.me/?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank", "noopener,noreferrer");
    }

    function renderSummary(){
      const {items,subtotal,ship,total} = calcTotals();
      qs("#summary").innerHTML = items.length
        ? items.map(i=>`<div class="sum"><span>${safe(i.name)} √ó ${i.qty}</span><strong>${money(i.line)}</strong></div>`).join("")
        : `<div class="empty">Your cart is empty. Add a flavour first ‚ú®</div>`;
      qs("#cSub").textContent = money(subtotal);
      qs("#cShip").textContent = money(ship);
      qs("#cTotal").textContent = money(total);
    }

    qs("#placeOrder").addEventListener("click", ()=>{
      const err = validate();
      if(err){ showErr(err); return; }
      const orderId = nowId();
      const pay = getPay();
      const text = buildText(orderId);

      track("purchase", {currency:"INR", value: calcTotals().total, transaction_id: orderId});

      if(pay==="razorpay" && STORE.razorpayPaymentPageUrl){
        window.open(STORE.razorpayPaymentPageUrl, "_blank", "noopener,noreferrer");
        showOk("Payment page opened. After payment, please confirm on WhatsApp for delivery ETA ‚úÖ");
        openWA(text);
        return;
      }
      openWA(text);
      showOk("WhatsApp opened with your order summary. Tap <strong>Send</strong> to confirm ‚Äî we‚Äôll reply with delivery ETA ‚úÖ");
    });

    qs("#whatsAppOnly").addEventListener("click", ()=>{
      const err = validate();
      if(err){ showErr(err); return; }
      openWA(buildText(nowId()));
      showOk("WhatsApp opened. Tap <strong>Send</strong> to confirm ‚úÖ");
    });

    qs("#copyMsg").addEventListener("click", async ()=>{
      const err = validate();
      if(err){ showErr(err); return; }
      const text = buildText(nowId());
      try{
        await navigator.clipboard.writeText(text);
        toast("Order message copied ‚úÖ Paste it in WhatsApp to confirm.");
      }catch(_){
        prompt("Copy your order message:", text);
      }
    });

    // ----------------------------
    // Vibe picker
    // ----------------------------
    const vibeMap = {
      calm:{ title:"Calm vibe ‚Üí Classic Salted", sku:"classic", copy:"Ritual: take a slow bite, breathe out, then take one more. The snack break that actually resets you." },
      focus:{ title:"Focus vibe ‚Üí Classic Salted", sku:"classic", copy:"Ritual: snack after your first deep-work block. Pair with water. Keep it clean, keep it steady." },
      cozy:{ title:"Cozy vibe ‚Üí Indian Masala", sku:"masala", copy:"Ritual: movie on, lights dim, slow munching. Cozy flavours, zero chaos." },
      fun:{ title:"Fun vibe ‚Üí Peri Peri", sku:"peri", copy:"Ritual: share a bowl. One person picks the next song. Small joy loops = big mood." },
      bold:{ title:"Bold vibe ‚Üí Peri Peri", sku:"peri", copy:"Ritual: take a bite, take a risk. Bold flavour, still light on you." }
    };
    let vibe = "calm";
    const vTitle = qs("#vTitle");
    const vCopy = qs("#vCopy");

    qsa(".chip").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        qsa(".chip").forEach(x=>x.setAttribute("aria-pressed","false"));
        btn.setAttribute("aria-pressed","true");
        vibe = btn.getAttribute("data-vibe");
        vTitle.textContent = vibeMap[vibe].title;
        vCopy.textContent  = vibeMap[vibe].copy;
      });
    });

    qs("#vAdd").addEventListener("click", ()=> addToCart(vibeMap[vibe].sku, 1));

    // ----------------------------
    // Reels hover preview
    // ----------------------------
    function renderReels(){
      const grid = qs("#reelGrid");
      if(!grid) return;
      if(!REELS.length){ grid.style.display="none"; return; }
      grid.innerHTML = REELS.map(r=>`
        <a class="reelCard" href="https://www.instagram.com/popkaari/" target="_blank" rel="noopener noreferrer" aria-label="Open Popkaari on Instagram">
          <img src="${safe(r.poster)}" alt="${safe(r.label||"Popkaari reel")}" loading="lazy" width="360" height="640"/>
          <video preload="none" muted playsinline loop style="position:absolute;inset:0;opacity:0"></video>
          <div class="rOv"><div class="rTag">${safe(r.label||"Popkaari reel")}</div><div class="rPlay">‚ñ∂</div></div>
        </a>
      `).join("");

      qsa(".reelCard").forEach((card,i)=>{
        const v = card.querySelector("video");
        const img = card.querySelector("img");
        const data = REELS[i];
        if(!data?.video) return;
        let loaded=false;
        const load=()=>{ if(loaded) return; loaded=true; v.src=data.video; };
        const play=async()=>{ try{ load(); v.style.opacity="1"; img.style.opacity="0"; await v.play(); }catch(_){}};
        const stop=()=>{ try{ v.pause(); v.currentTime=0; v.style.opacity="0"; img.style.opacity="1"; }catch(_){}};
        card.addEventListener("mouseenter", play);
        card.addEventListener("mouseleave", stop);
        card.addEventListener("focus", play);
        card.addEventListener("blur", stop);
      });
    }

    // ----------------------------
    // Init
    // ----------------------------
    function init(){
      renderProducts();
      renderReels();
      renderCart();
      qs("#year").textContent = String(new Date().getFullYear());
    }

    init();
  })();
  </script>
</body>
</html>
